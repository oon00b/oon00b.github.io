<!DOCTYPE html><html lang="ja" dir="ltr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>VirtualBoxにArch Linuxをインストールする</title><link href="https://creativecommons.org/licenses/by/4.0/" rel="license"><link href="../../../css/blogpost.css" rel="preload stylesheet" as="style"><link href="../../../css/highlight.css" rel="preload stylesheet" as="style"></head><body class="blog"><nav class="navigation blog-navigation"><a href="../../../">Home</a> | <a href="../../../blog">Blog</a> | <a href="../../../about">About</a></nav><article class="post blog-main"><h1 class="post-title">VirtualBoxにArch Linuxをインストールする</h1><time class="post-date" datetime="2020-05-18">2020-05-18</time><div class="post-tags">tags: [<a href="../../../blog/tags/Arch%20Linux/index.html">Arch Linux</a>] [<a href="../../../blog/tags/GNU-Linux/index.html">GNU/Linux</a>] [<a href="../../../blog/tags/VirtualBox/index.html">VirtualBox</a>]</div><div class="post-body"><p>VirtualBoxにArch LinuxをEFI + GPTでインストールする手順を書き残しておく。</p><h2 id="環境">環境</h2><ul><li><code>macOS 10.14.6</code></li><li><code>VirtualBox version 6.1.6</code></li></ul><h2 id="arch-linuxののダウンロード">Arch Linuxののダウンロード</h2><p><a href="https://www.archlinux.jp/download/">ダウンロードページ</a>のリンクから、ISOファイルをダウンロードする。チェックサムとPGP署名の確認もしておく。</p><div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="bu">printf</span> <span class="st">&quot;&lt;SHA1-CHECKSUM&gt; &lt;ISO&gt;&quot;</span> <span class="kw">|</span> <span class="ex">sha1sum</span> -c  # チェックサムの確認</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="ex">gpg</span> --auto-key-retrieve --verify <span class="op">&lt;</span>PGP SIGNATURE<span class="op">&gt;</span> # 署名の確認</span></code></pre></div><p><a href="https://www.archlinux.org/people/developers">Archの開発者</a>の鍵の指紋とPGP署名の指紋が一致するか確認しておく。</p><h2 id="arch-linuxのインストール">Arch Linuxのインストール</h2><p>デフォルトだと仮想コンソールのキーマップがUSになっているので、適当に変える。</p><div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="fu">loadkeys</span> jp106</span></code></pre></div><p>システムクロックの設定</p><div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="ex">timedatectl</span> set-ntp 1</span></code></pre></div><p>パーティションの作成。<code>fdisk -l</code>でハードディスクのデバイス名を確認して<code>gdisk</code>を起動する。</p><div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="ex">gdisk</span> /dev/sda</span></code></pre></div><p><code>o</code>コマンドで新しいパーティションテーブルを作成</p><p><code>n</code>コマンドでパーティションを作成。とりあえず、ルートパーティションと<a href="https://wiki.archlinux.jp/index.php/EFI_システムパーティション">ESP(EFI System Partition)</a>だけ作る。</p><p><strong>ESP</strong></p><ul><li>Partition number -&gt; 1</li><li>First sector -&gt; default</li><li>Last sector -&gt; +512M</li><li>Partition type -&gt; ef00 (EFI system)</li></ul><p><strong>ルートパーティション</strong></p><ul><li>Partition number -&gt; 2</li><li>First sector -&gt; default</li><li>Last sector -&gt; default</li><li>Partition type -&gt; 8304 (Linux x86-64 root)</li></ul><p><code>w</code>コマンドで変更を保存</p><p>ファイルシステムのフォーマット。ESPは必ずFATでフォーマットする必要がある。</p><div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="ex">mkfs.fat</span> -F32 /dev/sda1 # ESP</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="ex">mkfs.ext4</span> /dev/sda2     # root</span></code></pre></div><p>ファイルシステムのマウント。ルートから順にマウントする。</p><div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="fu">mount</span> /dev/sda2 /mnt      # root</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a><span class="fu">mkdir</span> /mnt/boot</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a><span class="fu">mount</span> /dev/sda1 /mnt/boot <span class="co"># ESP</span></span></code></pre></div><p><code>/etc/pacman.d/mirrorlist</code>を開いて日本のサーバーを上に持ってくる。</p><p>ミラーから必須パッケージと他に要りそうなパッケージをインストールする。</p><div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="ex">pacstrap</span> /mnt base linux linux-firmware vim man-db man-pages texinfo</span></code></pre></div><p>fstabを生成</p><div class="sourceCode" id="cb8"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a><span class="ex">genfstab</span> -U /mnt <span class="op">&gt;&gt;</span> /mnt/etc/fstab</span></code></pre></div><p>インストール先にchroot</p><div class="sourceCode" id="cb9"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="ex">arch-chroot</span> /mnt</span></code></pre></div><p>タイムゾーンの設定</p><div class="sourceCode" id="cb10"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a><span class="fu">ln</span> -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a><span class="ex">hwclock</span> -w</span></code></pre></div><p><code>/etc/locale.gen</code>を開き、<code>en_US.UTF-8 UTF-8</code>の行をアンコメントして、ロケールを生成する。</p><div class="sourceCode" id="cb11"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a><span class="ex">locale-gen</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;LANG=</span><span class="dt">\&quot;</span><span class="st">en_US.UTF-8</span><span class="dt">\&quot;</span><span class="st">&quot;</span> <span class="op">&gt;</span> /etc/locale.conf</span></code></pre></div><p>仮想コンソールのキーマップの設定を永続化</p><div class="sourceCode" id="cb12"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;KEYMAP=</span><span class="dt">\&quot;</span><span class="st">jp106</span><span class="dt">\&quot;</span><span class="st">&quot;</span> <span class="op">&gt;</span> /etc/vconsole.conf</span></code></pre></div><p>hostnameの設定</p><div class="sourceCode" id="cb13"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;&lt;MYHOSTNAME&gt;&quot;</span> <span class="op">&gt;</span> /etc/hostname</span></code></pre></div><p><code>/etc/hosts</code>の編集</p><pre><code>127.0.0.1 localhost
::1       localhost
127.0.1.1 &lt;MYHOSTNAME&gt;.localdomain &lt;MYHOSTNAME&gt;</code></pre><p><a href="https://wiki.archlinux.jp/index.php/Systemd-networkd">systemd-networkd</a>のネットワークの設定を書く。<code>en*</code>にマッチするデバイスで、DHCPクライアントを有効にする場合、以下のように書く。</p><pre><code>[Match]
Name=en*

[Network]
DHCP=yes</code></pre><p>設定は、<code>/etc/systemd/network/</code>以下に、<code>&lt;FOOBAR&gt;.network</code>みたいなファイル名で保存する。</p><p>設定が終わったら、サービスを有効化しておく。</p><div class="sourceCode" id="cb16"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a><span class="ex">systemctl</span> enable systemd-networkd.service</span></code></pre></div><p><code>/etc/resolv.conf</code>の編集</p><pre><code># cloudflare DNS
nameserver 1.1.1.1
nameserver 1.0.0.1</code></pre><p>rootのパスワードを設定</p><div class="sourceCode" id="cb18"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true"></a><span class="fu">passwd</span></span></code></pre></div><p><a href="https://wiki.archlinux.jp/index.php/GRUB">GRUB</a>のインストール</p><div class="sourceCode" id="cb19"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a><span class="ex">pacman</span> -S grub efibootmgr</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true"></a><span class="ex">grub-install</span> --efi-directory=/boot --target=x86_64-efi --bootloader-id=<span class="op">&lt;</span>ID<span class="op">&gt;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true"></a><span class="ex">grub-mkconfig</span> -o /boot/grub/grub.cfg</span></code></pre></div><h2 id="インストール後の作業">インストール後の作業</h2><p>とりあえず、sudoとXの設定、VirtualBox Guest Additionsのインストールまでやっておく。</p><h3 id="sudoの設定">sudoの設定</h3><p>ユーザーを追加して、<a href="https://wiki.archlinux.jp/index.php/Sudo">sudo</a>の設定をする。</p><p>ユーザーの追加</p><div class="sourceCode" id="cb20"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true"></a><span class="ex">useradd</span> -m -s /bin/bash -G wheel <span class="op">&lt;</span>USERNAME<span class="op">&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true"></a><span class="fu">passwd</span> <span class="op">&lt;</span>USERNAME<span class="op">&gt;</span></span></code></pre></div><p>sudoとviをインストールする。</p><div class="sourceCode" id="cb21"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true"></a><span class="ex">pacman</span> -S sudo vi</span></code></pre></div><p>visudoを起動して<code>%wheel ALL=(ALL) ALL</code>の行を、アンコメントする。</p><p>ルートアカウントをロックする。</p><div class="sourceCode" id="cb22"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true"></a><span class="fu">passwd</span> -l root</span></code></pre></div><h3 id="xの設定">Xの設定</h3><p><a href="https://wiki.archlinux.jp/index.php/Xorg">X</a>関連のソフトウェアとドライバーをインストールする。</p><div class="sourceCode" id="cb23"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true"></a><span class="fu">sudo</span> pacman -S xorg-server xorg-apps xorg-xinit xclip xf86-video-vmware xf86-input-vmmouse</span></code></pre></div><p>フォントをインストール</p><div class="sourceCode" id="cb24"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true"></a><span class="fu">sudo</span> pacman -S noto-fonts xorg-fonts-100dpi</span></code></pre></div><p><code>${XDG_CONFIG_HOME:-"${HOME}/.config"}/fontconfig/fonts.conf</code>に<a href="https://wiki.archlinux.jp/index.php/フォント設定">フォントの設定</a>を書く。</p><div class="sourceCode" id="cb25"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true"></a><span class="kw">&lt;?xml</span> version=&quot;1.0&quot;<span class="kw">?&gt;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true"></a><span class="dt">&lt;!DOCTYPE </span>fontconfig SYSTEM &quot;fonts.dtd&quot;<span class="dt">&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true"></a><span class="kw">&lt;fontconfig&gt;</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true"></a>    <span class="kw">&lt;match</span><span class="ot"> target=</span><span class="st">&quot;font&quot;</span><span class="kw">&gt;</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true"></a>        <span class="kw">&lt;edit</span><span class="ot"> name=</span><span class="st">&quot;embeddedbitmap&quot;</span><span class="kw">&gt;</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true"></a>            <span class="kw">&lt;bool&gt;</span>false<span class="kw">&lt;/bool&gt;</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true"></a>        <span class="kw">&lt;/edit&gt;</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true"></a>    <span class="kw">&lt;/match&gt;</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true"></a>    <span class="kw">&lt;match&gt;</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true"></a>        <span class="kw">&lt;test</span><span class="ot"> name=</span><span class="st">&quot;family&quot;</span><span class="kw">&gt;</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true"></a>            <span class="kw">&lt;string&gt;</span>sans-serif<span class="kw">&lt;/string&gt;</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true"></a>        <span class="kw">&lt;/test&gt;</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true"></a>        <span class="kw">&lt;edit</span><span class="ot"> name=</span><span class="st">&quot;family&quot;</span><span class="ot"> binding=</span><span class="st">&quot;strong&quot;</span><span class="kw">&gt;</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true"></a>            <span class="kw">&lt;string&gt;</span>Noto Sans<span class="kw">&lt;/string&gt;</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true"></a>        <span class="kw">&lt;/edit&gt;</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true"></a>    <span class="kw">&lt;/match&gt;</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true"></a></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true"></a>    <span class="kw">&lt;match&gt;</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true"></a>        <span class="kw">&lt;test</span><span class="ot"> name=</span><span class="st">&quot;family&quot;</span><span class="kw">&gt;</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true"></a>            <span class="kw">&lt;string&gt;</span>serif<span class="kw">&lt;/string&gt;</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true"></a>        <span class="kw">&lt;/test&gt;</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true"></a>        <span class="kw">&lt;edit</span><span class="ot"> name=</span><span class="st">&quot;family&quot;</span><span class="ot"> binding=</span><span class="st">&quot;strong&quot;</span><span class="kw">&gt;</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true"></a>            <span class="kw">&lt;string&gt;</span>Noto Serif<span class="kw">&lt;/string&gt;</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true"></a>        <span class="kw">&lt;/edit&gt;</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true"></a>    <span class="kw">&lt;/match&gt;</span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true"></a></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true"></a>    <span class="kw">&lt;match&gt;</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true"></a>        <span class="kw">&lt;test</span><span class="ot"> name=</span><span class="st">&quot;family&quot;</span><span class="kw">&gt;</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true"></a>            <span class="kw">&lt;string&gt;</span>monospace<span class="kw">&lt;/string&gt;</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true"></a>        <span class="kw">&lt;/test&gt;</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true"></a>        <span class="kw">&lt;edit</span><span class="ot"> name=</span><span class="st">&quot;family&quot;</span><span class="ot"> binding=</span><span class="st">&quot;strong&quot;</span><span class="kw">&gt;</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true"></a>            <span class="kw">&lt;string&gt;</span>Noto Sans Mono<span class="kw">&lt;/string&gt;</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true"></a>        <span class="kw">&lt;/edit&gt;</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true"></a>    <span class="kw">&lt;/match&gt;</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true"></a><span class="kw">&lt;/fontconfig&gt;</span></span></code></pre></div><p><a href="https://wiki.archlinux.jp/index.php/I3">i3</a>、<a href="https://wiki.archlinux.jp/index.php/Dmenu">dmenu</a>、<a href="https://wiki.archlinux.jp/index.php/Alacritty">alacritty</a>をインストール</p><div class="sourceCode" id="cb26"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true"></a><span class="fu">sudo</span> pacman -S i3 dmenu alacritty</span></code></pre></div><p><code>/etc/X11/xinit/xinitrc</code>を<code>~/.xinitrc</code>にコピーして、編集する。</p><div class="sourceCode" id="cb27"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true"></a><span class="co">#!/bin/sh</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-d</span> /etc/X11/xinit/xinitrc.d<span class="bu"> ]</span> ; <span class="kw">then</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true"></a> <span class="kw">for</span> <span class="ex">f</span> in /etc/X11/xinit/xinitrc.d/?* <span class="kw">;</span> <span class="kw">do</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true"></a>  [ <span class="ex">-x</span> <span class="st">&quot;</span><span class="va">$f</span><span class="st">&quot;</span> ] <span class="kw">&amp;&amp;</span> <span class="bu">.</span> <span class="st">&quot;</span><span class="va">$f</span><span class="st">&quot;</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true"></a> <span class="kw">done</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true"></a> <span class="bu">unset</span> <span class="va">f</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true"></a><span class="kw">fi</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true"></a><span class="ex">setxkbmap</span> -layout jp</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true"></a><span class="fu">xset</span> r rate 150 60</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true"></a></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true"></a><span class="bu">exec</span> i3</span></code></pre></div><p><code>startx</code>コマンドでXを起動できる。</p><h3 id="guest-additionsのインストール">Guest Additionsのインストール</h3><p><code>virtualbox-guest-utils</code>パッケージをインストールして、<code>vboxservice</code>サービスを有効化する。</p><div class="sourceCode" id="cb28"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true"></a><span class="fu">sudo</span> pacman -S virtualbox-guest-utils</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true"></a><span class="fu">sudo</span> systemctl enable vboxservice.service</span></code></pre></div><p>Xの起動中に、<code>VBoxClient-all</code>コマンドを実行すれば、Guest Additionsの機能が使えるようになる。</p><h4 id="vmsvgaでゲストのウィンドウサイズを変更したい場合">VMSVGAでゲストのウィンドウサイズを変更したい場合</h4><p>VMSVGAでゲストのウィンドウサイズを変更したい場合、pacmanではなくCDから、Guest Additionsをインストールしないといけないらしい。(<a href="https://wiki.archlinux.org/index.php/VirtualBox#Guest_display_auto-resizing_does_not_work_in_Arch_guests">参考</a>)</p><p>CDからGuest Additionsをインストールする方法を書き残しておく。</p><p>Guest Additionsのカーネルモジュールのビルドに必要なパッケージをインストール。</p><div class="sourceCode" id="cb29"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true"></a><span class="fu">sudo</span> pacman -S gcc make linux-headers</span></code></pre></div><p>VMのメニューバーから<strong>Devices</strong>-&gt;<strong>Insert Guest Additinos CD image…</strong>を選択してCDを挿入。マウントする。</p><div class="sourceCode" id="cb30"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true"></a><span class="fu">sudo</span> mkdir /mnt/guestadd</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true"></a><span class="fu">sudo</span> mount /dev/sr0 /mnt/guestadd</span></code></pre></div><p>マウント先に移動して、rootで<code>VBoxLinuxAdditions.run</code>スクリプトを実行する。</p><div class="sourceCode" id="cb31"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true"></a><span class="bu">cd</span> /mnt/guestadd</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true"></a><span class="fu">sudo</span> sh ./VBoxLinuxAdditions.run</span></code></pre></div><p>再起動してインストールしたカーネルモジュールを読み込ませる。</p><div class="sourceCode" id="cb32"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true"></a><span class="bu">cd</span> ~</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true"></a><span class="fu">sudo</span> umount /mnt/guestadd</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true"></a><span class="fu">sudo</span> rmdir /mnt/guestadd</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true"></a><span class="fu">sudo</span> systemctl reboot</span></code></pre></div><p>CDからインストールした場合、<code>startx</code>時に、<code>/etc/X11/xinit/xinitrc.d/98vboxadd-xclient.sh</code>でGuest Additionsの機能が有効化されるようになっている。</p><h2 id="参考">参考</h2><ul><li><a href="https://wiki.archlinux.jp/index.php/インストールガイド">インストールガイド - ArchWiki</a></li><li><a href="https://wiki.archlinux.jp/index.php/VirtualBox">VirtualBox - ArchWiki</a></li><li><a href="https://www.virtualbox.org/manual/ch04.html#additions-linux">Chapter 4. Guest Additions#additions-linux</a></li></ul></div></article><aside class="side blog-side"><aside class="archives"><h2 class="archives-title">Archives</h2><details class="archives-tree"><summary><a href="../../../blog/2022/index.html">2022</a>(1)/</summary><details class="archives-tree"><summary><a href="../../../blog/2022/01/index.html">2022/01</a>(1)/</summary><div class="archives-post"><a href="../../../blog/2022/01/suspend-disk-frequently-when-laptop-on-battery.html">tlpをインストールしたラップトップで、バッテリー駆動時にSSDのサスペンドが頻発する</a></div></details></details><details class="archives-tree"><summary><a href="../../../blog/2020/index.html">2020</a>(6)/</summary><details class="archives-tree"><summary><a href="../../../blog/2020/09/index.html">2020/09</a>(1)/</summary><div class="archives-post"><a href="../../../blog/2020/09/bash-and-zsh-startup-file.html">bash,zshが起動時に読み込む設定ファイル</a></div></details><details class="archives-tree"><summary><a href="../../../blog/2020/06/index.html">2020/06</a>(1)/</summary><div class="archives-post"><a href="../../../blog/2020/06/elona-on-archlinux.html">Arch Linuxでelonaを動かす方法</a></div></details><details class="archives-tree"><summary><a href="../../../blog/2020/05/index.html">2020/05</a>(1)/</summary><div class="archives-post"><a href="../../../blog/2020/05/install-archlinux-in-virtualbox.html">VirtualBoxにArch Linuxをインストールする</a></div></details><details class="archives-tree"><summary><a href="../../../blog/2020/04/index.html">2020/04</a>(1)/</summary><div class="archives-post"><a href="../../../blog/2020/04/linux-vconsole-color-settings.html">Linuxの仮想コンソールの色を設定する</a></div></details><details class="archives-tree"><summary><a href="../../../blog/2020/02/index.html">2020/02</a>(2)/</summary><div class="archives-post"><a href="../../../blog/2020/02/prevent-spotlightv100-fseventsd.html">[macOS]USBメモリー内に.Spotlight-V100と.fseventsdを作らせないようにする</a></div><div class="archives-post"><a href="../../../blog/2020/02/vim-source-expr.html">vimで式の結果をsourceする方法</a></div></details></details></aside><aside class="tags"><h2 class="tags-title">Tags</h2><a href="../../../blog/tags/Arch%20Linux/index.html">Arch Linux</a>(2), <a href="../../../blog/tags/GNU-Linux/index.html">GNU/Linux</a>(2), <a href="../../../blog/tags/Game/index.html">Game</a>(1), <a href="../../../blog/tags/Linux/index.html">Linux</a>(1), <a href="../../../blog/tags/VirtualBox/index.html">VirtualBox</a>(1), <a href="../../../blog/tags/Wine/index.html">Wine</a>(1), <a href="../../../blog/tags/bash/index.html">bash</a>(1), <a href="../../../blog/tags/macOS/index.html">macOS</a>(1), <a href="../../../blog/tags/vim/index.html">vim</a>(1), <a href="../../../blog/tags/zsh/index.html">zsh</a>(1)</aside></aside><footer class="footer blog-footer">このサイトの文章は<a href="https://creativecommons.org/licenses/by/4.0/" rel="license">クリエイティブ・コモンズ 表示 4.0 国際 ライセンス</a>の下に提供されています。</footer></body></html>