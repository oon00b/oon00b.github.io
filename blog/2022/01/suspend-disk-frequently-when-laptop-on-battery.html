<!DOCTYPE html><html lang="ja" dir="ltr"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>tlpをインストールしたラップトップで、バッテリー駆動時にSSDのサスペンドが頻発する</title><link href="https://creativecommons.org/licenses/by/4.0/" rel="license"><link href="../../../css/blogpost.css" rel="stylesheet" as="style"><body class="blog"><nav class="navigation blog-navigation"><a href="../../../">Home</a> | <a href="../../../blog">Blog</a> | <a href="../../../about">About</a></nav><article class="post blog-main"><h1 class="post-title">tlpをインストールしたラップトップで、バッテリー駆動時にSSDのサスペンドが頻発する</h1><time class="post-date" datetime="2022-01-25">2022-01-25</time><div class="post-tags">tags: [<a href="../../../blog/tags/GNU-Linux/index.html">GNU/Linux</a>]</div><div class="post-body"><p>ラップトップをバッテリー駆動で使っていると、ジャーナルに以下のようなログが頻繁に流れる</p><pre><code>sd 0:0:0:0: [sda] Starting disk
sd 0:0:0:0: [sda] Synchronizing SCSI cache
sd 0:0:0:0: [sda] Stopping disk</code></pre><p>どうやら省電力のために入れていたtlpが原因のようだったので解決法を調べた</p><h2 id="環境">環境</h2><p>ハードウェア</p><ul><li>MacBook Air 7,2</li><li>SSD: <code>/dev/sda</code></li></ul><p>ソフトウェア</p><ul><li>Arch Linux</li><li>linux version 5.16.2.arch1-1</li><li>tlp version 1.5.0-4</li></ul><h2 id="解決法">解決法</h2><p>以下の設定を<code>/etc/tlp.conf</code>もしくは、tlpのドロップインファイル(<code>/etc/tlp.d/*.conf</code>)に書けばいい</p><pre><code>AHCI_RUNTIME_PM_ON_BAT=on</code></pre><h2 id="参考">参考</h2><ul><li><a href="https://forum.manjaro.org/t/hard-drive-hdd-endlessly-cycling-stopping-starting-disk-when-laptop-is-on-battery/87089/9">Hard drive (HDD) endlessly cycling stopping/starting disk when laptop is on battery - Support / Laptop - Manjaro Linux Forum</a></li><li><a href="https://linrunner.de/tlp/settings/disks.html#ahci-runtime-pm-on-ac-bat">Disks and Controllers — TLP 1.5 documentation</a></li></ul></div></article><aside class="side blog-side"><aside class="archives"><h2 class="archives-title">Archives</h2><details class="archives-tree"><summary><a href="../../../blog/2022/index.html">2022</a>(2)/</summary><details class="archives-tree"><summary><a href="../../../blog/2022/10/index.html">2022/10</a>(1)/</summary><div class="archives-post"><a href="../../../blog/2022/10/awk-note-when-using-string-literal-as-regex.html">awkの正規表現で文字列定数を使う場合、特殊文字を二重にエスケープしなければならない</a></div></details><details class="archives-tree"><summary><a href="../../../blog/2022/01/index.html">2022/01</a>(1)/</summary><div class="archives-post"><a href="../../../blog/2022/01/suspend-disk-frequently-when-laptop-on-battery.html">tlpをインストールしたラップトップで、バッテリー駆動時にSSDのサスペンドが頻発する</a></div></details></details><details class="archives-tree"><summary><a href="../../../blog/2020/index.html">2020</a>(6)/</summary><details class="archives-tree"><summary><a href="../../../blog/2020/09/index.html">2020/09</a>(1)/</summary><div class="archives-post"><a href="../../../blog/2020/09/bash-and-zsh-startup-file.html">bash,zshが起動時に読み込む設定ファイル</a></div></details><details class="archives-tree"><summary><a href="../../../blog/2020/06/index.html">2020/06</a>(1)/</summary><div class="archives-post"><a href="../../../blog/2020/06/elona-on-archlinux.html">Arch Linuxでelonaを動かす方法</a></div></details><details class="archives-tree"><summary><a href="../../../blog/2020/05/index.html">2020/05</a>(1)/</summary><div class="archives-post"><a href="../../../blog/2020/05/install-archlinux-in-virtualbox.html">VirtualBoxにArch Linuxをインストールする</a></div></details><details class="archives-tree"><summary><a href="../../../blog/2020/04/index.html">2020/04</a>(1)/</summary><div class="archives-post"><a href="../../../blog/2020/04/linux-vconsole-color-settings.html">Linuxの仮想コンソールの色を設定する</a></div></details><details class="archives-tree"><summary><a href="../../../blog/2020/02/index.html">2020/02</a>(2)/</summary><div class="archives-post"><a href="../../../blog/2020/02/prevent-spotlightv100-fseventsd.html">[macOS]USBメモリー内に.Spotlight-V100と.fseventsdを作らせないようにする</a></div><div class="archives-post"><a href="../../../blog/2020/02/vim-source-expr.html">vimで式の結果をsourceする方法</a></div></details></details></aside><aside class="tags"><h2 class="tags-title">Tags</h2><a href="../../../blog/tags/Arch%20Linux/index.html">Arch Linux</a>(2), <a href="../../../blog/tags/GNU-Linux/index.html">GNU/Linux</a>(2), <a href="../../../blog/tags/Game/index.html">Game</a>(1), <a href="../../../blog/tags/Linux/index.html">Linux</a>(1), <a href="../../../blog/tags/VirtualBox/index.html">VirtualBox</a>(1), <a href="../../../blog/tags/Wine/index.html">Wine</a>(1), <a href="../../../blog/tags/awk/index.html">awk</a>(1), <a href="../../../blog/tags/bash/index.html">bash</a>(1), <a href="../../../blog/tags/macOS/index.html">macOS</a>(1), <a href="../../../blog/tags/vim/index.html">vim</a>(1), <a href="../../../blog/tags/zsh/index.html">zsh</a>(1)</aside></aside><footer class="footer blog-footer">このサイトの文章は<a href="https://creativecommons.org/licenses/by/4.0/" rel="license">クリエイティブ・コモンズ 表示 4.0 国際 ライセンス</a>の下に提供されています。</footer>